"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[258],{2258:function(t,e,n){n.r(e),n.d(e,{default:function(){return c}});var a=n(5893),o=n(7294),i=n(378),r=n(7794),s=n(7013);function c(t){let{productData:e,setAddToTAHClicked:n}=t,[c,d]=(0,o.useState)((0,r.Z)(0)),[u,y]=(0,o.useState)(),[l,f]=(0,o.useState)(!0),[h,p]=(0,o.useState)(!1),{mutate:b}=(0,s.Z)();async function m(){let t=await fetch("/api/try-at-home/add",{body:JSON.stringify({id:e.id,productData:e,type:i.Yu}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"}),a=await t.json();t.status<300&&(d((0,r.Z)(a.tryAtHomeQty)),p(!0),b(),n(!0))}async function j(){let t=await fetch("/api/try-at-home/delete",{body:JSON.stringify({id:e.id,type:i.Yu}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"}),a=await t.json();t.status<300&&(d((0,r.Z)(a.tryAtHomeQty)),p(!0),b(),n(!1))}if((0,o.useEffect)(()=>{fetch("/api/cart-size").then(t=>t.json()).then(t=>{d((0,r.Z)(t.tryAtHomeQty)),f(!1)})},[]),(0,o.useEffect)(()=>{fetch("/api/try-at-home/check-if-added",{body:JSON.stringify({id:e.id,type:i.Yu}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"}).then(t=>t.json()).then(t=>{y(t.alreadyAdded),f(!1),p(!1)})},[h]),l)return(0,a.jsx)("button",{});if(!l){if(u)return(0,a.jsx)("button",{className:"btn block border-gray-400 bg-gray-400 text-white",onClick:()=>j(),children:"Remove from try at-home"});if(!u&&c)return(0,a.jsx)("button",{className:"btn block border-sky-800/40 bg-sky-800/40 text-white",disabled:!0,children:"Your try at-home box is full!"});if(!u&&!c)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"mb-4 text-sm",children:"Not ready to commit just yet? Add it to your Try At-Home box first:"}),(0,a.jsx)("button",{className:"btn block border-black",onClick:()=>m(),children:"Try at home"})]})}}},7794:function(t,e,n){n.d(e,{Z:function(){return o}});var a=n(378);function o(t){return t>=a.e1}}}]);