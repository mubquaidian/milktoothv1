(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{8086:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart",function(){return a(5016)}])},968:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var s=a(5893),r=a(9008),i=a.n(r);function n(e){let{title:t}=e;return(0,s.jsx)(i(),{children:(0,s.jsx)("title",{children:"".concat(t," \xb7 Milktooth")})})}},7013:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var s=a(8100);let r=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return fetch(...t).then(e=>e.json())};function i(){return(0,s.ZP)("/api/cart-size",r)}},5016:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSP:function(){return b},default:function(){return g}});var s=a(5893),r=a(1664),i=a.n(r),n=a(1163),c=a(7294),o=a(3930);function l(e){let{subtotal:t}=e;return(0,s.jsxs)("div",{className:"grid grid-cols-2 mb-2 font-medium",children:[(0,s.jsx)("p",{children:"Subtotal"}),(0,s.jsx)("p",{children:(0,o.gn)(t)})]})}var d=a(1922),u=a(7013);function m(e){let{cart:t}=e,a=(0,c.useRef)(null),{setCartItemCount:r}=(0,d.M5)(),{mutate:l}=(0,u.Z)(),m=(0,n.useRouter)(),p=()=>{m.replace(m.asPath)};async function h(e){let t=await fetch("/api/cart/delete",{body:JSON.stringify({id:e.id}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"});if(t.status<300){p();let e=await t.json();r({cartItemCount:e.cartItemCount}),l()}}async function y(e){let t=await fetch("/api/cart/update",{body:JSON.stringify({id:e.id,quantity:e.quantity}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"});t.status<300&&p()}return t?(0,s.jsx)(s.Fragment,{children:t.items&&t.items.map((e,t)=>(0,s.jsx)("div",{className:"my-6 bg-white lg:max-w-[75%]",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-8 lg:grid-cols-4 xl:grid-cols-5",children:[(0,s.jsx)(i(),{href:"/products/switches/".concat(e.productData.id),className:"aspect-square lg:col-span-2 ",style:{backgroundColor:"".concat(e.productData.color_switch)},children:(0,s.jsx)("img",{className:"place-self-center",src:e.productData.image,alt:e.productData.name})}),(0,s.jsxs)("div",{className:"lg:col-span-2",children:[(0,s.jsx)(i(),{href:"/products/switches/".concat(e.productData.id),className:"mb-0 block md:mb-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-2xl",children:e.productData.name}),(0,s.jsx)("p",{className:"hidden text-sm text-gray-500 md:block",children:e.productData.switches_brand.brand}),(0,s.jsx)("p",{className:"hidden text-sm capitalize text-gray-500 md:block",children:e.productData.switches_type.type})]})}),(0,s.jsxs)("p",{className:"text-sm tracking-wide",children:[e.productData.number_of_switches," switches/order"]}),(0,s.jsxs)("div",{className:"grid grid-cols-6 items-center gap-0.5 lg:gap-1",children:[(0,s.jsx)("div",{className:"col-span-2 inline-block md:col-span-1",children:(0,o.gn)(e.productData.price)}),(0,s.jsx)("span",{className:"text-right",children:"x"}),(0,s.jsx)("input",{type:"number",ref:a,className:"col-span-2 border-2 border-gray-100 p-0.5 text-center md:m-2 md:p-2",name:"amount",defaultValue:e.quantity,min:"1"}),(0,s.jsx)("button",{className:"col-span-2 place-self-start text-sm md:place-self-auto lg:col-span-2 lg:text-base",onClick:()=>y({id:e.productData.id,price:e.productData.price,quantity:a.current.value}),children:(0,s.jsx)("span",{className:"border-b border-black pb-1",children:"Update"})})]}),(0,s.jsxs)("p",{className:"mb-0 mt-4 font-medium lg:mb-12",children:["Total:"," ",(0,o.gn)(e.productData.price*e.quantity)]}),(0,s.jsx)("button",{className:"border-b border-black pb-1 text-sm lg:text-base",onClick:()=>h({id:e.productData.id}),children:"Delete"})]})]})},t))}):(0,s.jsx)(s.Fragment,{})}var p=a(378),h=a(7794);function y(e){let{switches:t}=e,{tryAtHomeQty:a,setTryAtHomeQty:r}=(0,d.M5)(),[o,l]=(0,c.useState)((0,h.Z)(a)),{data:m,mutate:y}=(0,u.Z)(),x=(0,n.useRouter)(),f=()=>{x.replace(x.asPath)};async function b(e){let{id:t}=e,s=await fetch("/api/try-at-home/delete",{body:JSON.stringify({id:t,type:p.Yu}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"});if(s.status<300){f(),y();let e=await s.json();r({tryAtHomeQty:a-1}),l((0,h.Z)(e.tryAtHomeQty))}}return(0,s.jsx)(s.Fragment,{children:t&&t.map((e,t)=>(0,s.jsx)("div",{className:"my-6 bg-white lg:max-w-[75%]",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-8 lg:grid-cols-3 xl:grid-cols-5",children:[(0,s.jsx)(i(),{href:"/products/switches/".concat(e.productData.id),className:"aspect-square",style:{backgroundColor:"".concat(e.productData.color_switch)},children:(0,s.jsx)("img",{className:"place-self-center",src:e.productData.image,alt:e.productData.name})}),(0,s.jsxs)("div",{className:"col-span-1 lg:col-span-2 xl:col-span-4",children:[(0,s.jsx)(i(),{href:"/products/switches/".concat(e.productData.id),className:"mb-4 block",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-2xl",children:e.productData.name}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.productData.switches_brand.brand}),(0,s.jsx)("p",{className:"text-sm capitalize text-gray-500",children:e.productData.switches_type.type})]})}),(0,s.jsx)("button",{className:"text-sm lg:text-base",onClick:()=>b({id:e.productData.id}),children:(0,s.jsx)("span",{className:"border-b border-black pb-1",children:"Delete"})})]})]})},t))})}function x(){return(0,s.jsx)("section",{children:(0,s.jsx)("form",{method:"POST",action:"/api/create-checkout-session",children:(0,s.jsx)("button",{type:"submit",role:"link",children:(0,s.jsx)("a",{className:"btn border-black bg-black text-white",children:"Next step"})})})})}var f=a(968),b=!0;function g(e){let t="Want to try more switches? You can add ".concat(p.e1-e.tryAtHomeQty," more switches to your try at-home.");var a=0;e.cart&&(a=e.cart.items.reduce((e,t)=>e+t.quantity*t.productData.price,0)),e.tryAtHomeQty>0&&(a+=1e3);let r=(0,n.useRouter)();return(0,c.useEffect)(()=>{r.replace(r.asPath)},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.Z,{title:"Cart"}),e.tryAtHomeQty+e.cartItemCount>0&&(0,s.jsx)("h2",{className:"mb-4 text-4xl",children:"Your cart"}),e.tryAtHomeQty+e.cartItemCount===0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:"mb-4 text-4xl",children:"Your cart is empty"}),(0,s.jsx)(i(),{href:"/products/switches",className:"arrow-right",children:(0,s.jsx)("span",{className:"border-b border-black pb-1 text-lg",children:"Shop all switches"})})]}),(0,s.jsx)(m,{cart:e.cart}),e.tryAtHomeQty>0&&(0,s.jsx)("h3",{className:"mb-2 text-3xl",children:"Your try at-home items"}),e.tryAtHomeQty>0&&e.tryAtHomeQty<p.e1&&(0,s.jsxs)("div",{className:"mt-4 border border-black p-4",children:[(0,s.jsx)("p",{className:"mr-2 inline-block",children:t}),(0,s.jsx)(i(),{href:"/products/switches",className:"arrow-right inline-block",children:(0,s.jsx)("span",{className:"border-b border-black pb-1",children:"Explore more switches"})})]}),(0,s.jsx)(y,{switches:e.tryAtHomeSwitches}),e.tryAtHomeQty+e.cartItemCount>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"w-60",children:(0,s.jsx)(l,{subtotal:a})}),e.tryAtHomeQty>0&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"mb-4 bg-gray-50 p-4",children:(0,s.jsx)("p",{className:"mr-2 inline-block",children:"Your five days with the switches begin when theyâ€™re delivered"})})}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(x,{})})]})]})}},1922:function(e,t,a){"use strict";a.d(t,{EQ:function(){return l},M5:function(){return c},ZQ:function(){return o}});var s=a(6902),r=a(8597),i=a(2902),n=a(9444);let c=(0,s.ZP)(e=>({cartItemCount:0,tryAtHomeQty:0,setCartItemCount:t=>e((0,i.ZP)(e=>{e.cartItemCount=t.cartItemCount})),setTryAtHomeQty:t=>e((0,i.ZP)(e=>{e.tryAtHomeQty=t.tryAtHomeQty}))})),o=(0,s.ZP)(e=>({quizResults:n.map(function(e){return{id:e.id,responses:[]}}),crudResponse:t=>{e((0,i.ZP)(e=>{let a=e.quizResults.findIndex(e=>e.id===t.id),s=e.quizResults[a],r=s.responses.some(e=>e===t.response);r?e.quizResults[a].responses=e.quizResults[a].responses.filter(e=>e!==t.response):e.quizResults[a].responses=[...e.quizResults[a].responses,t.response]}))}})),l=(0,s.ZP)((0,r.tJ)(e=>({quizTaken:!1,quizTakenIsTrue:()=>{e((0,i.ZP)(e=>{e.quizTaken=!0}))}}),{name:"quiz-results"}));(0,s.ZP)(e=>({queryParams:[{id:"type",params:[]},{id:"weight",params:[]},{id:"audio",params:[]}],crudParams:t=>{e((0,i.ZP)(e=>{let a=e.queryParams.findIndex(e=>e.id===t.id),s=e.queryParams[a],r=s.params.some(e=>e===t.param);r?e.queryParams[a].params=e.queryParams[a].params.filter(e=>e!==t.param):e.queryParams[a].params=[...e.queryParams[a].params,t.param]}))},addParams:t=>{e((0,i.ZP)(e=>{let a=e.queryParams.findIndex(e=>e.id===t.id),s=e.queryParams[a],r=s.params.some(e=>e===t.param);r||(e.queryParams[a].params=[...e.queryParams[a].params,t.param])}))},clearParams:()=>{e((0,i.ZP)(e=>{e.queryParams=[{id:"type",params:[]},{id:"weight",params:[]},{id:"audio",params:[]}]}))}}))},378:function(e,t,a){"use strict";a.d(t,{OW:function(){return r},Yu:function(){return s},e1:function(){return i}});let s="switch",r="samplePack",i=10},3930:function(e,t,a){"use strict";function s(e){let t=(e/100).toLocaleString("en-US",{style:"currency",currency:"USD"});return t}function r(e){let t=Math.floor(100*e);return t<20?"lightweight":t<40?"medium-light":t<60?"mediumweight":t<80?"medium-heavy":"heavy"}function i(e){e=Math.round(100*e);let t="of switches in our selection";return e<=50?"a lighter bottom-out than ".concat(100-e,"% ").concat(t):"a heavier bottom-out than ".concat(e,"% ").concat(t)}function n(e){e=Math.round(100*e);let t="of other switches' actuation force in our selection";return e<=50?"lighter than ".concat(100-e,"% ").concat(t,"."):"heavier than ".concat(e,"% ").concat(t,".")}a.d(t,{Ar:function(){return r},MT:function(){return i},gn:function(){return s},jO:function(){return n}})},7794:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(378);function r(e){return e>=s.e1}},9444:function(e){"use strict";e.exports=JSON.parse('[{"question":"Which typing styles interest you?","id":"style","answerOptions":[{"answer":"Linear","id":"linear","desc":"I prefer a seamless glide when pressing down","imagePath":"https://res.cloudinary.com/milktooth/video/upload/v1662066522/quiz/linear_jrqdo9.jpg","mp4":"https://res.cloudinary.com/milktooth/video/upload/v1662066522/quiz/linear_jrqdo9.mp4","webm":"https://res.cloudinary.com/milktooth/video/upload/v1662066522/quiz/linear_jrqdo9.webm","gif":"https://res.cloudinary.com/milktooth/image/upload/v1671059431/quiz/linear_ehtvok.gif"},{"answer":"Bump","id":"bump","desc":"I prefer a tactile bump when pressing down (notice the bump on the switch stem)","imagePath":"https://res.cloudinary.com/milktooth/video/upload/v1662066526/quiz/bump_ybpyce.jpg","mp4":"https://res.cloudinary.com/milktooth/video/upload/v1662066526/quiz/bump_ybpyce.mp4","webm":"https://res.cloudinary.com/milktooth/video/upload/v1662066526/quiz/bump_ybpyce.webm","gif":"https://res.cloudinary.com/milktooth/image/upload/v1671059428/quiz/bump_bwzvla.gif"}]},{"question":"What audio feedback levels do you prefer?","id":"audio","answerOptions":[{"answer":"Clack or thock","id":"thock","desc":"I prefer \\"chocolate bar snap\\"-like audio feedback while typing","audioPath":"https://res.cloudinary.com/milktooth/video/upload/v1662065297/quiz/thock_m3hkhq.mp3"},{"answer":"\\"Shh... silence\\"","id":"silent","desc":"I prefer minimal, pillowy audio feedback while typing","audioPath":"https://res.cloudinary.com/milktooth/video/upload/v1662065297/quiz/silent_fadoct.mp3"},{"answer":"Crunchy","id":"clicky","desc":"I prefer \\"stepping on autumn leaves\\"-like audio feedback while typing","audioPath":"https://res.cloudinary.com/milktooth/video/upload/v1662065297/quiz/clicky_tqf5qv.mp3"}]},{"question":"How heavy would you like to type?","id":"force","answerOptions":[{"answer":"Light","id":"light","desc":"I prefer minimal resistance when pressing down"},{"answer":"Medium","id":"medium","desc":"I prefer standard resistance when pressing down"},{"answer":"Heavy","id":"heavy","desc":"I prefer more resistance when pressing down"}]}]')}},function(e){e.O(0,[100,315,774,888,179],function(){return e(e.s=8086)}),_N_E=e.O()}]);